<!DOCTYPE html>

<html data-bs-theme="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cgarciagl.github.io/Ragnos/docs/en/avanzado/autenticacion_integrada/" rel="canonical"/>
<link href="../../../img/favicon.ico" rel="shortcut icon"/>
<title>Autenticaci√≥n - Ragnos Docs</title>
<link href="../../../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../../../css/fontawesome.min.css" rel="stylesheet"/>
<link href="../../../css/brands.min.css" rel="stylesheet"/>
<link href="../../../css/solid.min.css" rel="stylesheet"/>
<link href="../../../css/v4-font-face.min.css" rel="stylesheet"/>
<link href="../../../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/panda-syntax-dark.min.css" id="hljs-light" rel="stylesheet"/>
<link disabled="" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" id="hljs-dark" rel="stylesheet"/>
<link href="../../../css/ragnos_style.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="../../">Ragnos Docs</a>
<!-- Expander button -->
<button aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbar-collapse" data-bs-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="nav-item">
<a class="nav-link" href="../../">Inicio</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Fundamentos</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../fundamentos/instalacion/">Instalaci√≥n</a>
</li>
<li>
<a class="dropdown-item" href="../../fundamentos/primeros_pasos/">Primeros Pasos</a>
</li>
<li>
<a class="dropdown-item" href="../../fundamentos/configuracion/">Configuraci√≥n</a>
</li>
<li>
<a class="dropdown-item" href="../../fundamentos/plantilla/">Generador CLI</a>
</li>
</ul>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Datasets y Modelos</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../datasets/datasets/">Creando Datasets</a>
</li>
<li>
<a class="dropdown-item" href="../../datasets/campos/">Referencia de Campos</a>
</li>
<li>
<a class="dropdown-item" href="../../datasets/guia_RQueryController/">Consultas Avanzadas (RQuery)</a>
</li>
<li>
<a class="dropdown-item" href="../../datasets/maestro-detalle/">Maestro-Detalle</a>
</li>
</ul>
</li>
<li class="nav-item dropdown">
<a aria-current="page" aria-expanded="false" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown" href="#" role="button">Backend Avanzado</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../guia_modo_api/">Modo API</a>
</li>
<li>
<a class="dropdown-item" href="../helpers/">Helpers y Utilidades</a>
</li>
<li>
<a class="dropdown-item" href="../hooks/">Hooks y eventos</a>
</li>
<li>
<a aria-current="page" class="dropdown-item active" href="./">Autenticaci√≥n</a>
</li>
<li>
<a class="dropdown-item" href="../auditlog/">Audit Log</a>
</li>
<li>
<a class="dropdown-item" href="../server_side_events/">Server Side Events</a>
</li>
<li>
<a class="dropdown-item" href="../despliegue/">Despliegue</a>
</li>
</ul>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Frontend y Reportes</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../frontend/personalizacion_ui/">Personalizaci√≥n UI</a>
</li>
<li>
<a class="dropdown-item" href="../../frontend/reportes_simples/">Reportes Simples</a>
</li>
<li>
<a class="dropdown-item" href="../../frontend/funciones_javascript/">Funciones JavaScript</a>
</li>
</ul>
</li>
<li class="nav-item">
<a class="nav-link" href="https://cgarciagl.github.io/Ragnos/">üè† Home</a>
</li>
</ul>
<ul class="nav navbar-nav ms-md-auto">
<li class="nav-item">
<a class="nav-link" data-bs-target="#mkdocs_search_modal" data-bs-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../hooks/" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../auditlog/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/cgarciagl/ragnos"><i class="fa-brands fa-github"></i> GitHub</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-bs-target="#toc-collapse" data-bs-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-body-tertiary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-bs-level="1"><a class="nav-link" href="#sistema-de-autenticacion-y-permisos-en-ragnos">Sistema de Autenticaci√≥n y Permisos en Ragnos</a>
<ul class="nav flex-column">
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#tablas-de-base-de-datos">Tablas de Base de Datos</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#proteccion-de-controladores">Protecci√≥n de Controladores</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#servicio-admin_aut">Servicio Admin_aut</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#autenticacion-via-api">Autenticaci√≥n v√≠a API</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#ejemplo-completo">Ejemplo Completo</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="sistema-de-autenticacion-y-permisos-en-ragnos">Sistema de Autenticaci√≥n y Permisos en Ragnos</h1>
<p>Ragnos incorpora un sistema de autenticaci√≥n ligero y flexible integrado directamente en el n√∫cleo del framework. Este sistema gestiona sesiones de usuario, protecci√≥n de controladores y control de acceso basado en roles (grupos).</p>
<p>El sistema se apoya principalmente en el servicio <code>App\Services\Admin_aut</code> y en la clase <code>BaseController</code>.</p>
<h2 id="tablas-de-base-de-datos">Tablas de Base de Datos</h2>
<p>El sistema espera una estructura de base de datos espec√≠fica:</p>
<ul>
<li><strong><code>gen_usuarios</code></strong>: Tabla de usuarios (<code>usu_id</code>, <code>usu_nombre</code>, <code>usu_login</code>, <code>usu_pword</code>, <code>usu_activo</code>, <code>usu_grupo</code>).</li>
<li><strong><code>gen_gruposdeusuarios</code></strong>: Tabla de roles (<code>gru_id</code>, <code>gru_nombre</code>).</li>
</ul>
<h2 id="proteccion-de-controladores">Protecci√≥n de Controladores</h2>
<p>Todos los controladores que extienden de <code>BaseController</code> (incluyendo <a href="../../datasets/datasets/"><code>RDatasetController</code></a>, <a href="../server_side_events/"><code>RProcessController</code></a>, etc.) tienen acceso a m√©todos de protecci√≥n simplificados.</p>
<h3 id="flujo-de-verificacion">Flujo de Verificaci√≥n</h3>
<div class="mermaid">graph TD
    Req["Petici√≥n Entrante"] --&gt; Controller["Controlador"]
    Controller --&gt;|Llama| Check{"checkLogin( )"}

    Check -- "No hay sesi√≥n" --&gt; Type{"¬øEs API?"}
    Type -- "S√≠" --&gt; Error401["JSON 401 Unauthorized"]
    Type -- "No" --&gt; Login["Redirigir a Login"]

    Check -- "Hay sesi√≥n" --&gt; Group{"¬øcheckUserInGroup( )?"}

    Group -- "No requerido" --&gt; Access["‚úÖ Acceso Permitido"]
    Group -- "Requerido" --&gt; Role{"¬øUsuario en Grupo?"}

    Role -- "S√≠" --&gt; Access
    Role -- "No" --&gt; Error403["‚õî Redirigir / Error 403"]

    %% Estilos mejorados
    style Access fill:#d4edda,stroke:#155724,stroke-width:2px,color:#155724
    style Error401 fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#721c24
    style Login fill:#fff3cd,stroke:#856404,stroke-width:2px,color:#856404
    style Error403 fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#721c24
</div>
<h3 id="checklogin"><code>checkLogin()</code></h3>
<p>Este m√©todo verifica si el usuario tiene una sesi√≥n activa. Si no la tiene:</p>
<ol>
<li>Para peticiones Web: Redirige al login (<code>admin/login</code>).</li>
<li>Para API: Verifica el header <code>Authorization</code> contra el <code>usu_token</code> en base de datos. Si falla, devuelve un error 401 JSON.</li>
</ol>
<p><strong>Uso:</strong>
Se recomienda llamarlo al inicio de cualquier funci√≥n que requiera autenticaci√≥n, o en el constructor si todo el controlador es privado.</p>
<div class="admonition tip">
<p class="admonition-title">Controllers P√∫blicos</p>
<p>Si tienes un controlador p√∫blico (ej. p√°gina de inicio), simplemente no llames a <code>checkLogin()</code>.</p>
</div>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="x">public function miFunciopPrivada()</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="x">{</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="x">    $this-&gt;checkLogin();</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="x">    // El resto del c√≥digo solo se ejecuta si el usuario est√° logueado</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="x">    return view('mi_vista');</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="x">}</span>
</code></pre></div>
<h3 id="checkuseringroupgrupos"><code>checkUserInGroup($grupos)</code></h3>
<p>Restringe el acceso exclusivamente a usuarios que pertenezcan a los grupos especificados.</p>
<ul>
<li><strong>Par√°metro</strong>: Puede ser un <code>string</code> con el nombre de un grupo o un <code>array</code> de strings para permitir m√∫ltiples grupos.</li>
<li><strong>Comportamiento</strong>:</li>
<li>Si no cumple la condici√≥n, redirige a <code>admin/index</code> (o devuelve 403/401 si es API).</li>
<li>Internamente llama a <code>checkLogin()</code>, por lo que no es necesario llamar a ambos.</li>
</ul>
<p><strong>Uso:</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="x">public function __construct()</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="x">{</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="x">    // Solo permitir acceso a Administradores</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="x">    $this-&gt;checkUserInGroup('Administrador');</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="x">}</span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="x">public function reporteGerencial()</span>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="x">{</span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="x">    // Permitir acceso a Administradores o Gerentes</span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="x">    $this-&gt;checkUserInGroup(['Administrador', 'Gerencia']);</span>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="x">    // L√≥gica del reporte...</span>
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="x">}</span>
</code></pre></div>
<hr/>
<h2 id="servicio-admin_aut">Servicio <code>Admin_aut</code></h2>
<p>Para l√≥gica m√°s granular dentro de tus vistas o controladores, puedes acceder directamente al servicio de autenticaci√≥n.</p>
<p>Lo ideal es invocarlo mediante <code>service('Admin_aut')</code>.</p>
<h3 id="funciones-principales">Funciones Principales</h3>
<h4 id="isloggedin"><code>isLoggedIn()</code></h4>
<p>Devuelve <code>true</code> si hay un usuario logueado, <code>false</code> en caso contrario.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="x">if (service('Admin_aut')-&gt;isLoggedIn()) {</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="x">    echo "Usuario conectado";</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="x">}</span>
</code></pre></div>
<h4 id="id"><code>id()</code></h4>
<p>Devuelve el ID (<code>usu_id</code>) del usuario actual.</p>
<h4 id="name"><code>name()</code></h4>
<p>Devuelve el nombre completo (<code>usu_nombre</code>) del usuario actual.</p>
<h4 id="isuseringroupgrupo"><code>isUserInGroup($grupo)</code></h4>
<p>Eval√∫a si el usuario actual pertenece al grupo indicado. Es muy √∫til para ocultar o mostrar botones en las vistas o aplicar l√≥gica condicional. Comparaci√≥n <em>case-insensitive</em>.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="x">// En un controlador o vista</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="x">if (service('Admin_aut')-&gt;isUserInGroup('Ventas')) {</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="x">    // Mostrar bot√≥n de crear pedido</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="x">}</span>
</code></pre></div>
<h4 id="camponombrecampo"><code>campo($nombreCampo)</code></h4>
<p>Obtiene cualquier campo de la tabla <code>gen_usuarios</code> para el usuario actual. La informaci√≥n se carga bajo demanda (lazy loading) la primera vez que se solicita un campo.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="x">// Obtener el email o cualquier campo personalizado</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="x">$email = service('Admin_aut')-&gt;getField('usu_email');</span>
</code></pre></div>
<hr/>
<h2 id="autenticacion-via-api">Autenticaci√≥n v√≠a API</h2>
<p>El sistema soporta autenticaci√≥n para APIs REST de forma transparente.</p>
<ol>
<li>Al hacer login, se genera un token seguro en <code>usu_token</code>.</li>
<li>El cliente debe enviar este token en el header <code>Authorization</code>.</li>
<li><code>checkLogin()</code> detecta autom√°ticamente si la petici√≥n es una llamada API (<code>isApiCall()</code>) y valida el token en lugar de la sesi√≥n de PHP.</li>
</ol>
<p>Esto permite utilizar los mismos controladores para la interfaz web y para aplicaciones m√≥viles o frontends desacoplados.</p>
<h2 id="ejemplo-completo">Ejemplo Completo</h2>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="cp">&lt;?php</span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="k">use</span> <span class="nx">App\ThirdParty\Ragnos\Controllers\BaseController</span><span class="p">;</span>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="k">class</span> <span class="nc">Pedidos</span> <span class="k">extends</span> <span class="nx">BaseController</span>
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="p">{</span>
<a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
<a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>    <span class="p">{</span>
<a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>        <span class="c1">// Cargar helpers necesarios</span>
<a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>        <span class="nx">helper</span><span class="p">([</span><span class="s1">'form'</span><span class="p">,</span> <span class="s1">'url'</span><span class="p">]);</span>
<a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>    <span class="p">}</span>
<a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>
<a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
<a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>    <span class="p">{</span>
<a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>        <span class="c1">// 1. Asegurar que est√© logueado</span>
<a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">checkLogin</span><span class="p">();</span>
<a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>
<a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>        <span class="nv">$auth</span> <span class="o">=</span> <span class="nx">service</span><span class="p">(</span><span class="s1">'Admin_aut'</span><span class="p">);</span>
<a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>
<a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>        <span class="c1">// 2. Obtener datos del usuario</span>
<a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>        <span class="nv">$data</span><span class="p">[</span><span class="s1">'usuario'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$auth</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">();</span>
<a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>        <span class="nv">$data</span><span class="p">[</span><span class="s1">'esAdmin'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$auth</span><span class="o">-&gt;</span><span class="na">isUserInGroup</span><span class="p">(</span><span class="s1">'Administrador'</span><span class="p">);</span>
<a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>
<a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">'pedidos/index'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>    <span class="p">}</span>
<a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>
<a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">eliminar</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
<a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a>    <span class="p">{</span>
<a href="#__codelineno-5-31" id="__codelineno-5-31" name="__codelineno-5-31"></a>        <span class="c1">// 3. Restricci√≥n estricta: Solo Admins pueden eliminar</span>
<a href="#__codelineno-5-32" id="__codelineno-5-32" name="__codelineno-5-32"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">checkUserInGroup</span><span class="p">(</span><span class="s1">'Administrador'</span><span class="p">);</span>
<a href="#__codelineno-5-33" id="__codelineno-5-33" name="__codelineno-5-33"></a>
<a href="#__codelineno-5-34" id="__codelineno-5-34" name="__codelineno-5-34"></a>        <span class="nv">$model</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\App\Models\PedidosModel</span><span class="p">();</span>
<a href="#__codelineno-5-35" id="__codelineno-5-35" name="__codelineno-5-35"></a>        <span class="nv">$model</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<a href="#__codelineno-5-36" id="__codelineno-5-36" name="__codelineno-5-36"></a>
<a href="#__codelineno-5-37" id="__codelineno-5-37" name="__codelineno-5-37"></a>        <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">'/pedidos'</span><span class="p">);</span>
<a href="#__codelineno-5-38" id="__codelineno-5-38" name="__codelineno-5-38"></a>    <span class="p">}</span>
<a href="#__codelineno-5-39" id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="p">}</span>
</code></pre></div></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script src="../../../js/bootstrap.bundle.min.js"></script>
<script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script src="../../../js/base.js"></script>
<script src="../../../js/particles.js"></script>
<script src="../../../search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<p>From here you can search these documents. Enter your search terms below.</p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div data-no-results-text="No results found" id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.6.1/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>
